(this.webpackJsonpreal_chat=this.webpackJsonpreal_chat||[]).push([[0],{144:function(e,t,n){e.exports=n(309)},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},184:function(e,t){},187:function(e,t,n){},188:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var r,a,s=n(0),c=n.n(s),i=n(61),o=n.n(i),u=(n(149),n(11)),l=n(18),m=n(20),d=n(19),p=n(14),E=(n(150),n(151),n(43)),h=n.n(E),f=n(15),v=n(42),_=n(140),g=n.n(_),b=n(36),S="https://pet-project-chat-back.herokuapp.com",O=(n(187),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.el&&this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.el&&this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.el&&this.el.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=this.props.messageReducer.messages;return t?c.a.createElement("div",{className:"chatBox__messages__history_box"},this.props.userReducer.recipientUser?c.a.createElement("div",null,t.map(this.messageRender,this),c.a.createElement("div",{ref:function(t){e.el=t}})):c.a.createElement("div",{className:"chatBox__messages__history_box__not_selected"},c.a.createElement("p",null,"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0447\u0430\u0442 "))):c.a.createElement("div",null,"Loading...")}},{key:"messageRender",value:function(e){var t=e.userSender,n=(e.userRecipient,e.date,e.text),r=e._id,a=JSON.parse(localStorage.getItem("user")).token,s=Object(b.a)(a)._id;return c.a.createElement("div",{key:r,style:t.id===s?{justifyContent:"flex-end"}:null,className:"chatMessages__messageBox"},c.a.createElement("div",{className:t.id===s?"chatMessages__message_right":"chatMessages__message_left"},c.a.createElement("p",{className:"chatMessages__msg"},n)))}}]),n}(s.Component)),R=Object(f.b)((function(e){return{userReducer:e.userReducer,messageReducer:e.messageReducer}}),null)(O),j=(n(188),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={redirect:!1},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("user"));if(e){var t=e.token,n=Object(b.a)(t)._id;null!==n&&this.props.getUsersList(n,t)}}},{key:"render",value:function(){if(500===this.props.userReducer.errorStatus)return c.a.createElement(p.a,{from:"/",to:"/SingIn"});var e=this.props.userReducer.list;if(e){var t=e.data.usersList;return c.a.createElement("div",{className:"userListBox"},c.a.createElement("div",{className:"userListBox__head"}),c.a.createElement("div",{className:"userListBox__list"},t.map(this.usersRender,this)))}return c.a.createElement("div",null,"Loading...")}},{key:"usersRender",value:function(e){var t=this,n=e._id,r=e.name,a=e.surname;return c.a.createElement("div",{key:n,className:"userListBox__list__users",onClick:function(){return function(e,n){var r=JSON.parse(localStorage.getItem("user"));if(r){var a=r.token;t.props.saveRecipientId(e,n),t.props.getMessages(e,a)}}(n,r)}},c.a.createElement("div",{className:"userListBox__list__userLogo"}),c.a.createElement("p",{className:"userName text"}," ",r," "),c.a.createElement("p",{className:"userSurname text"}," ",a," "))}}]),n}(s.Component)),x=Object(f.b)((function(e){return{userReducer:e.userReducer,userCheck:e.userCheck}}),(function(e){return{getUsersList:function(t,n){return e(function(e,t){return{type:"FETCH_FOR_LIST",id:e,token:t}}(t,n))},saveRecipientId:function(t,n){return e(function(e,t){return{type:"SAVE_USER_RECIPIENT_TO_STATE",id:e,name:t}}(t,n))},getMessages:function(t,n){return e(function(e,t){return{type:"GET_MESSAGES",id:e,token:t}}(t,n))},checkUser:function(){return e({type:"SEND_DATA_FOR_CHECK"})},logout:function(){return e({type:"LOGOUT"})}}}))(j),N=(n(190),n(191),n(192),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={value:""},r.handleChange=r.handleChange.bind(Object(v.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(v.a)(r)),r.keyPressedEnter=r.keyPressedEnter.bind(Object(v.a)(r)),r}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));if(t){var n=t.token,a=Object(b.a)(n),s=a._id,c=a.name;if(this.props.userReducer.recipientUser){var i=this.props.userReducer.recipientUser,o=i.id,u=i.name;(r=g.a.connect(S)).emit("userId",{userId:s}),r.on("privateMsg",(function(t){e.props.saveNewPrivateMsg(s,c,t,o,u)}))}}}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("user"));if(t){var n=t.token,a=Object(b.a)(n),s=a._id,c=a.name,i=this.props.userReducer.recipientUser,o=i.id,u=i.name;this.props.sendMsg(r,o,u,this.state.value,s,c),this.setState({value:""})}}},{key:"keyPressedEnter",value:function(e){"Enter"===e.key&&this.handleSubmit(e)}},{key:"render",value:function(){return c.a.createElement("div",{className:"chatBox"},c.a.createElement(h.a,{minDeviceWidth:280,maxWidth:768},c.a.createElement("div",{className:this.props.userReducer.recipientUser?"chatBox__messages":"displayNone"},c.a.createElement("div",{className:"chatBox__messages__history"},c.a.createElement(R,null)),c.a.createElement("div",{className:"chatBox__messages__typeMess"},c.a.createElement("form",{className:"chatBox__messages__typeMess__form",onSubmit:this.handleSubmit,onKeyPress:this.keyPressedEnter},c.a.createElement("textarea",{placeholder:"\u0412\u0430\u0448\u0435 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f",className:"customInput",value:this.state.value,onChange:this.handleChange}),c.a.createElement("input",{type:"image",src:"/sendBtn.png",alt:"Image",className:"inpImg"})))),c.a.createElement("div",{className:this.props.userReducer.recipientUser?"displayNone":"chatBox__UserList"},c.a.createElement(x,null))),c.a.createElement(h.a,{minDeviceWidth:769},c.a.createElement("div",{className:"chatBox__messages"},c.a.createElement("div",{className:"chatBox__messages__history"},c.a.createElement(R,null)),c.a.createElement("div",{className:this.props.userReducer.recipientUser?"chatBox__messages__typeMess":"displayNone"},c.a.createElement("form",{className:"chatBox__messages__typeMess__form",onSubmit:this.handleSubmit,onKeyPress:this.keyPressedEnter},c.a.createElement("textarea",{placeholder:"\u0412\u0430\u0448\u0435 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f",className:"customInput",value:this.state.value,onChange:this.handleChange}),c.a.createElement("input",{type:"image",src:"/sendBtn.png",alt:"Image",className:"inpImg"})))),c.a.createElement("div",{className:"chatBox__UserList"},c.a.createElement(x,null))))}}]),n}(s.Component)),y=Object(f.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{sendMsg:function(t,n,r,a,s,c){return e(function(e,t,n,r,a,s){return{type:"SEND_MESSAGE",socket:e,userRecipientId:t,userRecipientName:n,msg:r,senderId:a,senderName:s}}(t,n,r,a,s,c))},saveNewPrivateMsg:function(t,n,r,a,s){return e(function(e,t,n,r,a){return{type:"SAVE_NEW_PRIVATE_MSG",userRecipientId:e,userRecipientName:t,msg:n,senderId:r,senderName:a}}(t,n,r,a,s))}}}))(N),k=n(24),I=n.n(k),w=function(e){I.a.interceptors.request.use((function(t){return t.headers.authorization=e,t}),(function(e){Promise.reject(e)}))},T=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).redirect=function(){r.setState({redirect:!0})},r.state={redirect:!1},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){if(null!==localStorage.getItem("user")){var e=JSON.parse(localStorage.getItem("user"));w(e.token)}}},{key:"render",value:function(){var e=this;if(this.state.redirect)return c.a.createElement(p.a,{from:"/",to:"/SingIn"});return c.a.createElement("div",{className:"generalBox"},c.a.createElement(h.a,{minDeviceWidth:280,maxWidth:768},c.a.createElement("div",{className:"generalBox__media"},c.a.createElement("div",{className:"generalBox__media__header"},c.a.createElement("div",{className:this.props.userReducer.recipientUser?"generalBox__media__header__backImg":"displayNone"},c.a.createElement("img",{src:"/replydark.png",onClick:function(){return console.log("back"),void e.props.deleteRecipientId()},alt:""}))),c.a.createElement(y,null))),c.a.createElement(h.a,{minDeviceWidth:769},c.a.createElement("header",null,c.a.createElement("div",{className:"ext_btn",onClick:this.redirect},"\u0412\u0438\u0445\u0456\u0434")),c.a.createElement(y,null)))}}]),n}(s.Component),A=Object(f.b)((function(e){return{userReducer:e.userReducer}}),(function(e){return{deleteRecipientId:function(){return e({type:"DELETE_USER_RECIPIENT_FROM_STATE"})}}}))(T),C=n(312),U=n(311),D=function(e){return e?void 0:"Field is required"},L=function(e){return e&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?"Invalid email address":void 0},M=function(e,t){return e===t.password?void 0:"passwords is not concord"},B=n(64),G=n(65),P=n.n(G),H=function(e){var t=e.input,n=e.meta,r=Object(B.a)(e,["input","meta"]),a=n.touched&&n.error;return c.a.createElement("div",{className:P.a.Input},c.a.createElement("div",{className:a?P.a.inputError:""},c.a.createElement("input",Object.assign({},t,r))),a&&c.a.createElement("span",{className:P.a.errorText},n.error))},W=(a=8,function(e){return e.length<a?"Min length is ".concat(a," symbols"):void 0}),F=function(e){var t=e.handleSubmit;return c.a.createElement("form",{onSubmit:t},c.a.createElement("span",null,"\u0406\u043c'\u044f:"),c.a.createElement(C.a,{className:"inp_txt",component:H,type:"text",name:"name",validate:[D]}),c.a.createElement("span",null,"\u0424\u0430\u043c\u0456\u043b\u0456\u044f:"),c.a.createElement(C.a,{className:"inp_txt",component:H,type:"text",name:"surname",placeholder:"Surname",validate:[D]}),c.a.createElement("span",null,"Email:"),c.a.createElement(C.a,{className:"inp_txt",component:H,type:"text",name:"email",placeholder:"E-mail",validate:[D,L]}),c.a.createElement("span",null,"\u041f\u0430\u0440\u043e\u043b\u044c:"),c.a.createElement(C.a,{className:"inp_pass",component:H,type:"password",name:"password",placeholder:"Password",validate:[D,W]}),c.a.createElement("span",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c:"),c.a.createElement(C.a,{className:"inp_pass",component:H,type:"password",name:"password2",placeholder:"Retype password",validate:[D,M]}),c.a.createElement("button",{className:"inp_sbm",type:"submit",label:"submit"},"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f"))},J=F=Object(U.a)({form:"login"})(F),V=(n(306),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).submit=function(t){e.props.SendRegisterData(t)},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.registrationRedux.isRegister?(alert("\u0412\u0438 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u043b\u0438\u0441\u044c"),c.a.createElement(p.a,{to:"/SingIn"})):c.a.createElement("div",null,c.a.createElement("div",{id:"login-box"},c.a.createElement("div",{className:"left"},c.a.createElement("h1",null,"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"),c.a.createElement(J,{onSubmit:this.submit}))))}}]),n}(s.Component)),K=Object(f.b)((function(e){return{registrationRedux:e.registrationRedux}}),(function(e){return{SendRegisterData:function(t){return e(function(e){return{type:"DATA_IS_SENDING",form:e}}(t))}}}))(V),z=function(e){var t=e.handleSubmit;return c.a.createElement("form",{onSubmit:t},c.a.createElement("span",null,"Email:"),c.a.createElement(C.a,{className:"inp_txt",component:H,type:"text",name:"email",placeholder:"Email",validate:[D]}),c.a.createElement("span",null,"\u041f\u0430\u0440\u043e\u043b\u044c:"),c.a.createElement(C.a,{className:"inp_txt",component:H,type:"password",name:"password",placeholder:"Password",validate:[D]}),c.a.createElement("button",{className:"inp_sbm",type:"submit",label:"submit"},"\u0423\u0432\u0456\u0439\u0442\u0438"))},q=z=Object(U.a)({form:"Auth"})(z),Z=(n(307),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).submit=function(e){var t=e.email,n=e.password;r.props.authUser(t,n)},r.redirect=function(){r.setState({redirect:!0})},r.state={redirect:!1},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.logout(),localStorage.removeItem("user")}},{key:"render",value:function(){if(this.props.auth.result&&this.props.auth.result.success){var e={token:this.props.auth.result.msg,isLogged:!0};localStorage.setItem("user",JSON.stringify(e));var t=JSON.parse(localStorage.getItem("user")).token;if(w(t),!0===this.props.auth.result.success&&void 0!==t)return c.a.createElement(p.a,{from:"/SingIn",to:"/"})}return this.state.redirect?c.a.createElement(p.a,{from:"/SingIn",to:"/registration"}):500===this.props.auth.errorStatus?(alert("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0438\u0439 Email \u0430\u0431\u043e \u043f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement("div",null,c.a.createElement("div",{id:"login-box"},c.a.createElement("div",{className:"left"},c.a.createElement("h1",null,"\u0412\u0445\u0456\u0434"),c.a.createElement(q,{onSubmit:this.submit}),c.a.createElement("div",{className:"redirectToRegPage"},c.a.createElement("span",null,"\u0412\u0438 \u0442\u0443\u0442 \u0432\u043f\u0435\u0440\u0448\u0435? "),c.a.createElement("span",{className:"redirectBtn",onClick:this.redirect},"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f")))))):c.a.createElement("div",null,c.a.createElement("div",{id:"login-box"},c.a.createElement("div",{className:"left"},c.a.createElement("h1",null,"\u0412\u0445\u0456\u0434"),c.a.createElement(q,{onSubmit:this.submit}),c.a.createElement("div",{className:"redirectToRegPage"},c.a.createElement("span",null,"\u0412\u0438 \u0442\u0443\u0442 \u0432\u043f\u0435\u0440\u0448\u0435? "),c.a.createElement("span",{className:"redirectBtn",onClick:this.redirect},"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044f")))))}}]),n}(s.Component)),$=Object(f.b)((function(e){return{auth:e.auth}}),(function(e){return{authUser:function(t,n){return e(function(e,t){return{type:"AUTH_IS_SENDING",email:e,password:t}}(t,n))},logout:function(){return e({type:"LOGOUT"})}}}))(Z),Q=function(e){var t=e.component,n=(e.auth,Object(B.a)(e,["component","auth"])),r=JSON.parse(localStorage.getItem("user")),a=!1;return r&&(a=r.isLogged),c.a.createElement(p.b,Object.assign({},n,{render:function(e){return!0===a?c.a.createElement(t,e):c.a.createElement(p.a,{to:"/SingIn"})}}))},X=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){if(null!==localStorage.getItem("user")){var e=JSON.parse(localStorage.getItem("user"));w(e.token)}return c.a.createElement(p.d,null,c.a.createElement(Q,{path:"/",component:A,exact:!0}),c.a.createElement(p.b,{path:"/registration"},c.a.createElement(K,null)),c.a.createElement(p.b,{path:"/SingIn"},c.a.createElement($,null)))}}]),n}(s.Component),Y=Object(f.b)((function(e){return{userCheck:e.userCheck}}),(function(e){return{checkUser:function(){return e({type:"SEND_DATA_FOR_CHECK"})},logout:function(){return e({type:"LOGOUT"})}}}))(X),ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ne=n(13),re=n(12),ae=n(143),se=n(314),ce=n(142),ie={messages:[],endpoint:"http://localhost:8080/"},oe=n(313);var ue=Object(re.c)({form:se.a,messageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_MESSAGE_TO_STATE":var n={_id:Object(oe.a)(),text:t.action.msg,userRecipient:{id:t.action.userRecipientId,name:t.action.userRecipientName},userSender:{id:t.action.senderId,name:t.action.senderName},date:new Date};e=Object(ne.a)(Object(ne.a)({},e),{},{messages:[].concat(Object(ce.a)(e.messages),[n])});break;case"MESSAGES_HAS_LOADED":e=Object(ne.a)(Object(ne.a)({},e),{},{messages:t.res.data.messages});break;case"ERROR_LOADING":e={loadingError:t.Error.data,errorStatus:t.Error.status};default:return e}return e},registrationRedux:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_IS_SUCCESS":return Object(ne.a)(Object(ne.a)({},e),{},{isRegister:t.res.data.success});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_IS_SUCCESS":return Object(ne.a)(Object(ne.a)({},e),{},{result:t.res});case"AUTH_IS_ERROR":return Object(ne.a)(Object(ne.a)({},e),{},{errorStatus:t.Error.status,errorData:t.Error.data});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LISTS_HAS_LOADED":return Object(ne.a)(Object(ne.a)({},e),{},{list:t.res});case"SAVE_USER_RECIPIENT":return Object(ne.a)(Object(ne.a)({},e),{},{recipientUser:{id:t.res.id,name:t.res.name}});case"ERROR_LOAD_LIST":return{loadingError:t.Error.data,errorStatus:t.Error.status};case"DELETE_USER_RECIPIENT_FROM_STATE":return Object(ne.a)(Object(ne.a)({},e),{},{recipientUser:null});default:return e}},userCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS_USER_CHECK":return console.log(t),t.response;case"ERROR_USER_CHECK":e={checkError:t.Error.data,errorStatus:t.Error.status};default:return e}}}),le=function(e,t){return"LOGOUT_USER"===t.type&&(console.log("LOGOUT_USER"),e=void 0),ue(e,t)},me=n(7),de=n.n(me),pe=n(5),Ee=new function e(){Object(u.a)(this,e),this.checkUser=function(){return I.a.get("".concat(S,"/auth/check")).then((function(e){return e.data}))}},he=de.a.mark(ve),fe=Ee.checkUser;function ve(e){var t,n;return de.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log(e),r.next=4,Object(pe.b)(fe,e);case 4:return t=r.sent,console.log(t),r.next=8,Object(pe.d)({type:"SUCCESS_USER_CHECK",response:t});case 8:r.next=15;break;case 10:return r.prev=10,r.t0=r.catch(0),n=r.t0.response,r.next=15,Object(pe.d)({type:"ERROR_USER_CHECK",Error:n});case 15:case"end":return r.stop()}}),he,null,[[0,10]])}var _e=new function e(){Object(u.a)(this,e),this.authUser=function(e,t){return I.a.post("".concat(S,"/auth"),{email:e,password:t}).then((function(e){return console.log(e),e.data}))}},ge=de.a.mark(Oe),be=de.a.mark(Re),Se=_e.authUser;function Oe(e){var t,n;return de.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(pe.b)(Se,e.email,e.password);case 3:return t=r.sent,r.next=6,Object(pe.d)({type:"AUTH_IS_SUCCESS",res:t});case 6:r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(0),n=r.t0.response,r.next=13,Object(pe.d)({type:"AUTH_IS_ERROR",Error:n});case 13:case"end":return r.stop()}}),ge,null,[[0,8]])}function Re(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(pe.d)({type:"LOGOUT_USER"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),be,null,[[0,5]])}var je=new function e(){Object(u.a)(this,e),this.getMessages=function(e,t){return I.a.post("".concat(S,"/message/get"),{id:e,token:t})}},xe=function(e,t,n,r,a,s){e.emit("msg",{userRecipientId:t,userRecipientName:n,msg:r,senderId:a,senderName:s,date:new Date},(function(e){return e})),e.on("privateMsg",(function(e){console.log(e)}))},Ne=de.a.mark(Ie),ye=de.a.mark(we),ke=de.a.mark(Te);function Ie(e){return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(pe.b)(xe,e.socket,e.userRecipientId,e.userRecipientName,e.msg,e.senderId,e.senderName);case 3:return t.next=5,Object(pe.d)({type:"SAVE_MESSAGE_TO_STATE",action:e});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(pe.d)({type:"ERROR_SEND",error:t.t0});case 11:case"end":return t.stop()}}),Ne,null,[[0,7]])}function we(e){var t,n,r;return de.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=je.getMessages,a.prev=1,a.next=4,Object(pe.b)(t,e.id,e.token);case 4:return n=a.sent,a.next=7,Object(pe.d)({type:"MESSAGES_HAS_LOADED",res:n});case 7:a.next=15;break;case 9:return a.prev=9,a.t0=a.catch(1),r=a.t0.response,console.log(r),a.next=15,Object(pe.d)({type:"ERROR_LOADING",Error:r});case 15:case"end":return a.stop()}}),ye,null,[[1,9]])}function Te(e){return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(pe.d)({type:"SAVE_MESSAGE_TO_STATE",action:e});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),ke,null,[[0,5]])}var Ae=new function e(){Object(u.a)(this,e),this.getUsersList=function(e,t){return I.a.post("".concat(S,"/users/lists"),{id:e,token:t})}},Ce=de.a.mark(De),Ue=de.a.mark(Le);function De(e){var t,n,r;return de.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=Ae.getUsersList,a.next=4,Object(pe.b)(t,e.id,e.token);case 4:return n=a.sent,a.next=7,Object(pe.d)({type:"USERS_LISTS_HAS_LOADED",res:n});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),r=a.t0.response,a.next=14,Object(pe.d)({type:"ERROR_LOAD_LIST",Error:r});case 14:case"end":return a.stop()}}),Ce,null,[[0,9]])}function Le(e){var t;return de.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t={id:e.id,name:e.name},n.next=4,Object(pe.d)({type:"SAVE_USER_RECIPIENT",res:t});case 4:n.next=10;break;case 6:return n.prev=6,n.t0=n.catch(0),n.next=10,Object(pe.d)({type:"ERROR_LOAD_LIST",error:n.t0});case 10:case"end":return n.stop()}}),Ue,null,[[0,6]])}var Me=new function e(){Object(u.a)(this,e),this.sendRegisterDatas=function(e){return I.a.post("".concat(S,"/registration"),{form:e})}},Be=de.a.mark(Pe),Ge=Me.sendRegisterDatas;function Pe(e){var t;return de.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(pe.b)(Ge,e.form);case 3:return t=n.sent,n.next=6,Object(pe.d)({type:"REGISTER_IS_SUCCESS",res:t});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),Be,null,[[0,8]])}var He=de.a.mark(Ke),We=de.a.mark(ze),Fe=de.a.mark(qe),Je=de.a.mark(Ze),Ve=de.a.mark($e);function Ke(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pe.e)("SEND_DATA_FOR_CHECK",ve);case 2:case"end":return e.stop()}}),He)}function ze(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pe.e)("AUTH_IS_SENDING",Oe);case 2:return e.next=4,Object(pe.e)("LOGOUT",Re);case 4:case"end":return e.stop()}}),We)}function qe(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pe.e)("SEND_MESSAGE",Ie);case 2:return e.next=4,Object(pe.e)("GET_MESSAGES",we);case 4:return e.next=6,Object(pe.e)("SAVE_NEW_PRIVATE_MSG",Te);case 6:case"end":return e.stop()}}),Fe)}function Ze(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pe.e)("FETCH_FOR_LIST",De);case 2:return e.next=4,Object(pe.e)("SAVE_USER_RECIPIENT_TO_STATE",Le);case 4:case"end":return e.stop()}}),Je)}function $e(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pe.e)("DATA_IS_SENDING",Pe);case 2:case"end":return e.stop()}}),Ve)}var Qe=de.a.mark(Xe);function Xe(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pe.a)([Object(pe.c)(ze),Object(pe.c)(Ke),Object(pe.c)(qe),Object(pe.c)(Ze),Object(pe.c)($e)]);case 2:case"end":return e.stop()}}),Qe)}var Ye=n(31),et=function(){var e=Object(ae.a)();return Object(ne.a)(Object(ne.a)({},Object(re.e)(le,Object(re.a)(e))),{},{runSaga:e.run(Xe)})}();o.a.render(c.a.createElement(Ye.a,null,c.a.createElement(f.a,{store:et},c.a.createElement(Y,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):te(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):te(t,e)}))}}()},65:function(e,t,n){e.exports={inputError:"FormsControls_inputError__1QAwK",errorText:"FormsControls_errorText__1zGvg",Input:"FormsControls_Input__184BB"}}},[[144,1,2]]]);
//# sourceMappingURL=main.db4d87fd.chunk.js.map